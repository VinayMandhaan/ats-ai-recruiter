(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{1515:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>o,EY:()=>r,lt:()=>n});var l=t(6439);let i={currentStep:0},a=(0,l.Z0)({name:"ui",initialState:i,reducers:{setCurrentStep(e,s){e.currentStep=s.payload},resetCurrentStep:()=>i}}),{setCurrentStep:r,resetCurrentStep:n}=a.actions,o=a.reducer},5591:(e,s,t)=>{Promise.resolve().then(t.bind(t,6152))},6152:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var l=t(5155),i=t(2115),a=t(8068),r=t(7187),n=t(4540),o=t(3464),c=t(1515),d=t(5695),x=t(8824);let u=e=>{var s,t,i,o;let{result:u}=e,m=(0,d.useRouter)(),h=(0,n.wA)(),v=e=>e>=80?"text-green-600":e>=50?"text-yellow-600":"text-red-600";return(0,l.jsxs)("div",{className:"m-4 mt-6",children:[(0,l.jsx)("div",{className:"absolute top-0 left-6",children:(0,l.jsx)(a.A,{onClick:()=>{h((0,c.lt)()),h((0,x.cL)()),m.push("/")},children:"Home"})}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(r.A,{title:"Interview Score",subTitle:"Your score is based on your response time, problem solving skills, technical knowledge, and cultural fit."}),(0,l.jsx)("div",{className:"text-5xl font-bold mt-4",children:(0,l.jsxs)("p",{className:v(null==u?void 0:u.overallScore),children:[null==u?void 0:u.overallScore,"%"]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Summary"}),(0,l.jsx)("p",{className:"text-gray-700",children:null==u?void 0:u.summary})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recommendation"}),(0,l.jsx)("p",{className:"text-gray-700",children:null==u?void 0:u.recommendation})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:Object.entries(u.scores).map(e=>{var s,t;let[i,a]=e;return(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 capitalize",children:i.replace(/([A-Z])/g," $1").trim()}),(0,l.jsxs)("div",{className:"text-3xl font-bold mb-4 ".concat(v(a.score)),children:[a.score,"%"]}),(0,l.jsx)("p",{className:"text-gray-700 mb-4",children:a.explanation}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Strengths"}),(0,l.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:null==a?void 0:null===(s=a.strengths)||void 0===s?void 0:s.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Areas for Improvement"}),(0,l.jsx)("ul",{className:"list-disc list-inside text-gray-700",children:null==a?void 0:null===(t=a.areasForImprovement)||void 0===t?void 0:t.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]})]})]},i)})}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mt-4",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Response Timing Analysis"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[null==u?void 0:null===(t=u.timingMetrics)||void 0===t?void 0:null===(s=t.averageResponseTime)||void 0===s?void 0:s.toFixed(1),"s"]}),(0,l.jsx)("div",{className:"text-gray-600",children:"Average Response Time"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[null==u?void 0:null===(i=u.timingMetrics)||void 0===i?void 0:i.minResponseTime,"s"]}),(0,l.jsx)("div",{className:"text-gray-600",children:"Fastest Response"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[null==u?void 0:null===(o=u.timingMetrics)||void 0===o?void 0:o.maxResponseTime,"s"]}),(0,l.jsx)("div",{className:"text-gray-600",children:"Slowest Response"})]})]})]})]})},m=()=>{let e=(0,i.useRef)(null),s=(0,n.d4)(e=>e.candidateReducer.jobDescription),t=(0,n.d4)(e=>e.candidateReducer.candidateSummary),[c,d]=(0,i.useState)(!1),[x,m]=(0,i.useState)(""),[h,v]=(0,i.useState)([]),[g,p]=(0,i.useState)(null),[b,j]=(0,i.useState)(""),[y,N]=(0,i.useState)(!1),[w,f]=(0,i.useState)(null),[S,A]=(0,i.useState)({technical:0,behavioral:0,situational:0}),[k,T]=(0,i.useState)(0),E=()=>{var s;null===(s=e.current)||void 0===s||s.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(()=>{E()},[h]);let C=async()=>{d(!0);try{await o.A.post("/api/generate-questions",{jobDescription:s,cvText:t}).then(e=>{let s=e.data,t=s.technical[0],l=Object.values(s).reduce((e,s)=>e+(null==s?void 0:s.length),0);console.log("totalQues",l),console.log("data",s),m(t),v([{role:"assistant",content:t,timestamp:Date.now()}]),p(Date.now()),d(!1),T(l)}).catch(e=>{console.log("Error",e),d(!1)})}catch(e){console.log("Error",e)}},R=async()=>{if(!(null==b?void 0:b.trim())||!x)return;let e=g?Math.round((Date.now()-g)/1e3):0,s=[...h,{role:"user",content:b,timestamp:Date.now(),timing:e}];v(s),j(""),d(!0);try{await o.A.post("/api/interview",{messages:s,question:x,answer:b,timing:e,cvText:t,questionCounts:S}).then(e=>{let t=e.data;if(t.interviewComplete){D();return}v([...s,{role:"assistant",content:t.question,timestamp:t.timestamp}]),m(t.question),p(Date.now()),t.questionCounts&&A(t.questionCounts),d(!1)}).catch(e=>{console.log("Error",e),d(!1)})}catch(e){console.log("Error",e)}},D=async()=>{d(!0);try{await o.A.post("/api/interview-result",{messages:h,jobDescription:s,cvText:t}).then(e=>{let s=e.data;f(s),N(!0),d(!1)}).catch(e=>{console.log("Error",e),d(!1)})}catch(e){console.log("Error",e)}};return y&&w?(0,l.jsx)("div",{className:"h-screen w-screen",children:(0,l.jsx)(u,{result:w})}):(0,l.jsx)("div",{className:"h-screen w-screen",children:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center h-full",children:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg shadow-lg p-6",children:(null==h?void 0:h.length)==0?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(r.A,{title:"Welcome to the Interview",subTitle:"This interview will be conducted by AI. You will be asked a series of questions to assess your skills and suitability for the role. You can start the interview by clicking the button below."}),(0,l.jsx)(a.A,{disabled:c,onClick:()=>{C()},children:c?"Starting Interview...":"Start Interview"})]}):(0,l.jsxs)("div",{className:" space-y-6 bg-white rounded-lg p-6 max-w-[80%]",children:[(0,l.jsxs)("div",{className:"h-[500px] overflow-y-auto space-y-4",children:[(0,l.jsxs)("p",{children:["Question ",Math.floor(h.length/2)+1," of ",k]}),h.map((e,s)=>(0,l.jsx)("div",{className:"flex ".concat((null==e?void 0:e.role)==="assistant"?"justify-start":"justify-end"),children:(0,l.jsxs)("div",{className:"max-w-[80%] rounded-lg p-4 ".concat((null==e?void 0:e.role)==="assistant"?"bg-gray-100 text-gray-900":"bg-blue-600 text-white"),children:[(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:null==e?void 0:e.content}),(null==e?void 0:e.timing)&&(0,l.jsxs)("p",{className:"text-xs mt-2 opacity-70",children:["Time taken: ",null==e?void 0:e.timing," seconds"]})]})},s)),(0,l.jsx)("div",{ref:e})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"Type your answer here...",className:"flex-1 p-3 border-black border-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:outline-none",rows:3}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("button",{onClick:R,disabled:c||!(null==b?void 0:b.trim()),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Processing...":"Submit Answer"}),(0,l.jsx)("button",{onClick:D,disabled:c||h.length<2,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 disabled:opacity-50",children:"End Interview"})]})]})]})})})})}},7187:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var l=t(5155);let i=e=>{let{title:s,subTitle:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("h3",{className:"text-white text-3xl font-semibold text-center",children:s}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("p",{className:"text-center text-gray-400",children:t})})]})}},8068:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var l=t(5155);let i=e=>{let{children:s,onClick:t,disabled:i}=e;return(0,l.jsx)("button",{onClick:t,className:"bg-transparent border-white border-2 hover:bg-white hover:text-black transition-all duration-300 text-white px-16 py-2 rounded-lg mt-8 font-semibold cursor-pointer ".concat(i?"opacity-50 cursor-not-allowed":""),disabled:i,children:s})}},8824:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>x,U5:()=>r,cL:()=>d,u4:()=>n,uN:()=>o,wD:()=>c});var l=t(6439);let i={candidateSummary:"",jobTitle:"",jobExperience:"",jobDescription:""},a=(0,l.Z0)({name:"candidate",initialState:i,reducers:{setCandidateSummary(e,s){e.candidateSummary=s.payload},setJobTitle(e,s){e.jobTitle=s.payload},setJobExperience(e,s){e.jobExperience=s.payload},setJobDescription(e,s){e.jobDescription=s.payload},reset:()=>i}}),{setCandidateSummary:r,setJobTitle:n,setJobExperience:o,setJobDescription:c,reset:d}=a.actions,x=a.reducer}},e=>{var s=s=>e(e.s=s);e.O(0,[722,794,441,684,358],()=>s(5591)),_N_E=e.O()}]);